if("undefined"==typeof OGX){var OGX={};OGX.StarEngine=function(){}}OGX.StarEngine.prototype.MapConverter=function(){"use strict";function e(e,n){var l,a,i,u,v={},f={};n||(n=0);for(var o=0;o<Number(e.nY);o++)for(var m=0;m<Number(e.nX);m++)if(""!==e.lv[n].t[o][m]){switch(l=new OGX.StarEngine.BaseTile,l.pos2D={x:m*Number(e.tS),y:o*Number(e.tS)},l.posIso=r(l.pos2D),l.frame=Number(e.lv[n].t[o][m].substr(3)),l.border=t(e,m,o,n),a=Number(e.lv[n].t[o][m].substr(2,1)),1===String(l.frame).length?i="00"+String(l.frame):null,2===String(l.frame).length?i="0"+String(l.frame):null,3===String(l.frame).length?i=String(l.frame):null,f[a+"_"+l.frame]?u=f[a+"_"+l.frame]:(u=PIXI.Texture.fromImage("lv"+a+"_img"+i+".png"),f[a+"_"+l.frame]=u),l.texture=u,l.z=0,l.type=0,"lv"+a){case"lv1":case"lv3":l.z=10,l.type=1;break;case"lv0":l.z=0,l.type=0}v["t_"+m+"_"+o]=l}return v}function t(e,t,r,n){return""!==e.lv[n].t[r][t]&&(""===e.lv[n].t[r][t-1]||("undefined"!=typeof e.lv[n].t[r+1]&&""===e.lv[n].t[r+1][t]||("undefined"!=typeof e.lv[n].t[r+2]&&"undefined"!=typeof e.lv[n].t[r+1]&&""===e.lv[n].t[r+2][t]&&""===e.lv[n].t[r+1][t+1]||""===e.lv[n].t[r][t-2]&&""===e.lv[n].t[r-1][t])))}function r(e){var t={x:0,y:0},r=e.x/2,n=e.x/4*-1,l=e.y/2,a=e.y/4*-1;return t.x=r+l,t.y=n-a,t}this.convertMap=function(t,r){var n=$.parseJSON(r),l=new OGX.StarEngine.Map;l.name=t,l.nTileX=Number(n.nX),l.nTileY=Number(n.nY),l.tileSize=Number(n.tS);for(var a=0;a<n.lv.length;a++)l.levels[a]={},l.levels[a].tiles=e(n,a);return l}},OGX.StarEngine.MapConverter=function(e){"use strict";return new OGX.StarEngine.prototype.MapConverter(e)};