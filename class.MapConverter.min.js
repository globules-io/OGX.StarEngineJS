if('undefined'==typeof OGX){}OGX.StarEngine.MapConverter=class{convertMap(a,b){let c=$.parseJSON(b),d=new OGX.StarEngine.Map;d.name=a,d.nTileX=+c.nX,d.nTileY=+c.nY,d.tileSize=+c.tS;for(let e=0;e<c.lv.length;e++)d.levels[e]={},d.levels[e].tiles=this.convertMapToTileDictionary(c,e);return d}convertMapToTileDictionary(a,b){let c,d,e,f,g={},h={};b||(b=0);for(let k=0;k<+a.nY;k++)for(let j=0;j<+a.nX;j++)if(''!==a.lv[b].t[k][j]){switch(c=new OGX.StarEngine.BaseTile,c.pos2D={x:j*+a.tS,y:k*+a.tS},c.posIso=this.convert_2D_ISO(c.pos2D),c.frame=+a.lv[b].t[k][j].substr(3),c.border=this.isBorder(a,j,k,b),d=+a.lv[b].t[k][j].substr(2,1),1===(c.frame+'').length?e='00'+(c.frame+''):null,2===(c.frame+'').length?e='0'+(c.frame+''):null,3===(c.frame+'').length?e=c.frame+'':null,h[d+'_'+c.frame]?f=h[d+'_'+c.frame]:(f=PIXI.Texture.fromImage('lv'+d+'_img'+e+'.png'),h[d+'_'+c.frame]=f),c.texture=f,c.z=0,c.type=0,'lv'+d){case'lv1':case'lv3':c.z=10,c.type=1;break;case'lv0':c.z=0,c.type=0;}g['t_'+j+'_'+k]=c}return g}isBorder(a,b,c,d){return''!==a.lv[d].t[c][b]&&(!(''!==a.lv[d].t[c][b-1])||!('undefined'==typeof a.lv[d].t[c+1]||''!==a.lv[d].t[c+1][b])||!('undefined'==typeof a.lv[d].t[c+2]||'undefined'==typeof a.lv[d].t[c+1]||''!==a.lv[d].t[c+2][b]||''!==a.lv[d].t[c+1][b+1])||!(''!==a.lv[d].t[c][b-2]||''!==a.lv[d].t[c-1][b]))}convert_2D_ISO(a){let b={x:0,y:0},c=a.x/2,d=-1*(a.x/4),e=a.y/2,f=-1*(a.y/4);return b.x=c+e,b.y=d-f,b}};